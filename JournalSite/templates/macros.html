<!--suppress ALL-->
{% macro modal(id) %}
<div class="modal" id="{{ id }}" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content p-3">
      {{ caller() }}
    </div>
  </div>
</div>
{% endmacro %}

<!--ICONS-->
{% macro brand_icon(size=25, color='currentcolor', class='') %}
<svg xmlns="http://www.w3.org/2000/svg" width="{{ size }}" height="{{ size }}" fill="{{ color }}" class="bi bi-journal-album {{ class }}" viewBox="0 0 16 16">
  <path d="M5.5 4a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 0-.5-.5h-5zm1 7a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3z"/>
  <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/>
  <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/>
</svg>
{% endmacro %}

{% macro user_icon(size=20, color='currentcolor', class='') %}
<svg xmlns="http://www.w3.org/2000/svg" width="{{ size }}" height="{{ size }}" fill="{{ color }}" class="bi bi-person-fill {{ class }}" viewBox="0 0 16 16">
  <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
</svg>
{% endmacro %}

<!--CARDS-->
{% macro book_card(book) %}
<div class="card col-xl-4">
  <div class="card-body" style="border-color: {{ book.color }}">
    <span class="pe-2 heading2" contenteditable="true" onkeydown="editBook({{ book.id }}, event)" id="name{{ book.id }}">{{ book.name }}</span><br>
    <a href="{{ url_for('books.book', id_=book.id) }}" class="btn-custom">{{ '%s entries' % book.get_entries().count() }}</a>
    <div class="mt-3">
      <a class="btn-delete" onclick="toggleDiv('deleteBook' + {{ book.id }})">Delete</a>
      <a class="btn-custom bg-danger" onclick="deleteBook({{ book.id }})" id="deleteBook{{ book.id }}" style="display:none">Delete?</a>
    </div>
  </div>
</div>
{% endmacro %}

{% macro entry_card(entry) %}
<div class="card col-xl-3">
  <div class="card-body">
    <a class="heading3" href="{{ url_for('entries.edit_entry', id_=entry.id) }}">{{ entry.date_created.strftime('%F %T') }}</a>
    <a style="background-color: {{ entry.books.color }}" class="btn-custom" href="{{ url_for('books.book', id_=entry.book) }}">{{ entry.books.name }}</a>
    <div class="mt-3">
      <a class="text-danger me-2" onclick="toggleDiv('deleteEntry' + {{ entry.id }})">X</a>
      <a class="btn-custom bg-danger" onclick="deleteEntry({{ entry.id }})" id="deleteEntry{{ entry.id }}" style="display:none">Delete?</a>
    </div>
  </div>
</div>
{% endmacro %}

<!--FORMS-->
{% macro login_form(class='') %}
<form class="{{ class }}" action="{{ url_for('login') }}" method="POST">
  <input name="username" autocomplete="off" class="input-custom w-100 mb-2" type="text" placeholder="Username">
  <input name="password" autocomplete="off" class="input-custom w-100 mb-2" type="password" placeholder="Password">
  <button type="submit" class="btn-custom w-100">Log In</button>
</form>
{% endmacro %}

{% macro signup_form(class='') %}
<form class="{{ class }}" action="{{ url_for('signup') }}" method="POST">
  <input name="username" autocomplete="off" class="input-custom w-100 mb-2" type="text" placeholder="Username">
  <input name="password" autocomplete="off" class="input-custom w-100 mb-2" type="password" placeholder="Password">
  <button type="submit" class="btn-custom w-100">Sign Up</button>
</form>
{% endmacro %}

{% macro book_create_form(class='') %}
<form class="input-group {{ class }}" onsubmit="event.preventDefault(); createBook(); this.reset();">
  <input id="name" autocomplete="off" class="input-custom" type="text" placeholder="Name">
  <button type="submit" class="btn-custom">Add Book</button>
</form>
{% endmacro %}

{% macro toolbar(class='') %}
<div class="{{ class }}">
  <button type="button" onclick="formatText('bold')" class="btn-custom">B</button>
  <button type="button" onclick="formatText('italic')" class="btn-custom">I</button>
  <button type="button" onclick="formatText('insertUnorderedList')" class="btn-custom">â€¢</button>
  <button type="button" onclick="formatText('insertOrderedList')" class="btn-custom">123</button>
  <button type="button" onclick="formatText('indent')" class="btn-custom">--></button>
  <button type="button" onclick="formatText('outdent')" class="btn-custom"><--</button>
  <button type="button" onclick="formatText('removeFormat')" class="btn-custom">X</button>
  <button type="button" onclick="formatText('fontName', 'monospace')" class="btn-custom">< / ></button>
</div>
{% endmacro %}

{% macro entry_editor(entry) %}
<form onsubmit="event.preventDefault(); editEntry({{ entry.id }});">
  <select id="book" class="input-custom w-100 mb-3 heading3" onchange="editEntry({{ entry.id }})" style="border-color: {{ entry.books.color }}">
    {% for i in current_user.get_books() %}
    <option value="{{ i.id }}" {% if i.id== entry.book %}selected{% endif %}>{{ i.name }}</option>
    {% endfor %}
  </select>
  {{ toolbar(class='mb-3') }}
  <div class="input-custom mb-3" id="content" contenteditable="true">{{ entry.content | safe}}</div>
  <button type="submit" class="btn-custom w-100 bg-success"><span class="spinner-border spinner-border-sm" style="display:none" id="spinner"></span> Save</button>
</form>
{% endmacro %}

<!--OTHER-->
{% macro entry_sort(class='') %}
<div class="{{ class }}">
  <span class="p-custom">Sort By:</span>
  {% if order_by != 'date_created desc' %}<a class="btn-custom me-2" href="{{ url_for('entries.entries_', order_by='date_created desc') }}">Date Created</a>{% endif %}
  {% if order_by != 'book' %}<a class="btn-custom" href="{{ url_for('entries.entries_', order_by='book') }}">Book</a>{% endif %}
</div>
{% endmacro %}